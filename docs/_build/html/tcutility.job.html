
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Setup workflows with tcutility.job &#8212; TCutility v0.10.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css?v=a5c4661c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=8d3428ec"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/tabs.js?v=3030b3cb"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'tcutility.job';</script>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/119413491"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item"><!-- _templates/logo.html -->
<style>
    .myDiv {
      color: #323232;
      font-size: 30px;
      font-weight: 400;
      line-height: : 33px;
      text-decoration: none;
    }
</style>
<div class="myDiv">
    <a href="./index.html">
        <img src="https://avatars.githubusercontent.com/u/119413491?s=60&v=4">
        TCutility
    </a>
</div></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item"><!-- _templates/star.html -->
<a href=https://github.com/TheoChem-VU><i class="fa-brands fa-github"></i> TheoCheM</a></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item"><!-- _templates/star.html -->
<a href=https://github.com/TheoChem-VU><i class="fa-brands fa-github"></i> TheoCheM</a></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Setup...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="setup-workflows-with-tcutility-job">
<h1>Setup workflows with tcutility.job<a class="headerlink" href="#setup-workflows-with-tcutility-job" title="Link to this heading">#</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This module offers you the tools to efficiently and easily build computational workflows with various engines.
The module defines usefull classes that do all the heavy lifting (input and runscript preparation) in the background, while ensuring correctness of the generated inputs</p>
<section id="job-classes">
<h3>Job classes<a class="headerlink" href="#job-classes" title="Link to this heading">#</a></h3>
<p>Jobs are run using subclasses of the <a class="reference internal" href="api/tcutility.job.html#tcutility.job.generic.Job" title="tcutility.job.generic.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">Job</span></code></a> class. The base <a class="reference internal" href="api/tcutility.job.html#tcutility.job.generic.Job" title="tcutility.job.generic.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">Job</span></code></a> class handles setting up directories and running the calculations.</p>
<p>The <a class="reference internal" href="api/tcutility.job.html#tcutility.job.generic.Job" title="tcutility.job.generic.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">Job</span></code></a> subclasses are also context-managers, which results in cleaner and more error-proof code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFJob</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># job classes are also context-managers</span>
<span class="linenos"> 4</span><span class="c1"># when exiting the context-manager the job will automatically be run</span>
<span class="linenos"> 5</span><span class="c1"># this ensures you won&#39;t forget to start the job</span>
<span class="linenos"> 6</span><span class="k">with</span> <span class="n">ADFJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">job</span><span class="p">:</span>
<span class="linenos"> 7</span>    <span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;example.xyz&#39;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># you can also not use the context-manager</span>
<span class="linenos">10</span><span class="c1"># in that case, don&#39;t forget to run the job</span>
<span class="linenos">11</span><span class="n">job</span> <span class="o">=</span> <span class="n">ADFJob</span><span class="p">()</span>
<span class="linenos">12</span><span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;example.xyz&#39;</span><span class="p">)</span>
<span class="linenos">13</span><span class="n">job</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>You can control where a calculation is run by changing the <code class="docutils literal notranslate"><span class="pre">job.name</span></code> and <code class="docutils literal notranslate"><span class="pre">job.rundir</span></code> properties.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFJob</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">with</span> <span class="n">ADFJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">job</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;example.xyz&#39;</span><span class="p">)</span>
<span class="linenos">5</span>    <span class="n">job</span><span class="o">.</span><span class="n">rundir</span> <span class="o">=</span> <span class="s1">&#39;./calc_dir/molecule_1&#39;</span>
<span class="linenos">6</span>    <span class="n">job</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;ADF_calculation&#39;</span>
<span class="linenos">7</span>
<span class="linenos">8</span><span class="nb">print</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">workdir</span><span class="p">)</span>
</pre></div>
</div>
<p>This script will run a single point calculation using ADF in the working directory <code class="docutils literal notranslate"><span class="pre">./calc_dir/molecule_1/ADF_calculation</span></code>. You can access the full path to the working directory using the <code class="docutils literal notranslate"><span class="pre">job.workdir</span></code> property.</p>
</section>
<section id="slurm-support">
<h3>Slurm support<a class="headerlink" href="#slurm-support" title="Link to this heading">#</a></h3>
<p>One usefull feature is that the <a class="reference internal" href="api/tcutility.job.html#tcutility.job.generic.Job" title="tcutility.job.generic.Job"><code class="xref py py-class docutils literal notranslate"><span class="pre">Job</span></code></a> class detects if slurm is able to be used on the platform the script is running on. If slurm is available, jobs will be submitted using <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> instead of ran locally. It is possible to set any <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> option you would like.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFJob</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="k">with</span> <span class="n">ADFJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">job</span><span class="p">:</span>
<span class="linenos">4</span>    <span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;example.xyz&#39;</span><span class="p">)</span>
<span class="linenos">5</span>    <span class="c1"># we can set any sbatch settings using the job.sbatch() method</span>
<span class="linenos">6</span>    <span class="c1"># in this case, we set the partition to &#39;tc&#39; and the number of cores to 32</span>
<span class="linenos">7</span>    <span class="n">job</span><span class="o">.</span><span class="n">sbatch</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="s1">&#39;tc&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="job-dependencies">
<h3>Job dependencies<a class="headerlink" href="#job-dependencies" title="Link to this heading">#</a></h3>
<p>It is possible to setup dependencies between jobs. This allows you to use the results of one calculation as input for a different calculation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFJob</span><span class="p">,</span> <span class="n">CRESTJob</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># submit and run a CREST calculation</span>
<span class="linenos"> 4</span><span class="k">with</span> <span class="n">CRESTJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">crest_job</span><span class="p">:</span>
<span class="linenos"> 5</span>    <span class="n">crest_job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;input.xyz&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span>    <span class="n">crest_job</span><span class="o">.</span><span class="n">sbatch</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="s1">&#39;tc&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>    <span class="n">crest_job</span><span class="o">.</span><span class="n">rundir</span> <span class="o">=</span> <span class="s1">&#39;./calculations/molecule_1&#39;</span>
<span class="linenos"> 9</span>    <span class="n">crest_job</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;CREST&#39;</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="c1"># get the 10 lowest conformers using the crest_job.get_conformer_xyz() method</span>
<span class="linenos">12</span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">conformer_xyz</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">crest_job</span><span class="o">.</span><span class="n">get_conformer_xyz</span><span class="p">(</span><span class="mi">10</span><span class="p">)):</span>
<span class="linenos">13</span>    <span class="c1"># set up the ADF calculation</span>
<span class="linenos">14</span>    <span class="k">with</span> <span class="n">ADFJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">opt_job</span><span class="p">:</span>
<span class="linenos">15</span>        <span class="c1"># make the ADFJob depend on the CRESTJob</span>
<span class="linenos">16</span>        <span class="c1"># slurm will wait for the CRESTJob to finish before starting the ADFJob</span>
<span class="linenos">17</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">dependency</span><span class="p">(</span><span class="n">crest_job</span><span class="p">)</span>
<span class="linenos">18</span>        <span class="c1"># you can set a file to an xyz-file</span>
<span class="linenos">19</span>        <span class="c1"># that does not exist yet as the molecule</span>
<span class="linenos">20</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="n">conformer_xyz</span><span class="p">)</span>
<span class="linenos">21</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">sbatch</span><span class="p">(</span><span class="n">p</span><span class="o">=</span><span class="s1">&#39;tc&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="linenos">22</span>
<span class="linenos">23</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">functional</span><span class="p">(</span><span class="s1">&#39;OLYP-D3(BJ)&#39;</span><span class="p">)</span>
<span class="linenos">24</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">basis_set</span><span class="p">(</span><span class="s1">&#39;TZ2P&#39;</span><span class="p">)</span>
<span class="linenos">25</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">quality</span><span class="p">(</span><span class="s1">&#39;Good&#39;</span><span class="p">)</span>
<span class="linenos">26</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">optimization</span><span class="p">()</span>
<span class="linenos">27</span>
<span class="linenos">28</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">rundir</span> <span class="o">=</span> <span class="s1">&#39;./calculations/molecule_1&#39;</span>
<span class="linenos">29</span>        <span class="n">opt_job</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;conformer_</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>This script will first setup and submit a <a class="reference internal" href="api/tcutility.job.html#tcutility.job.crest.CRESTJob" title="tcutility.job.crest.CRESTJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">CRESTJob</span></code></a> calculation to generate conformers for the structure in <code class="docutils literal notranslate"><span class="pre">input.xyz</span></code>. It will then submit geometry optimizations for the 10 lowest conformers using <a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFJob" title="tcutility.job.adf.ADFJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFJob</span></code></a> at the <code class="docutils literal notranslate"><span class="pre">OLYP-D3(BJ)/TZ2P</span></code> level of theory. Slurm will first wait for the <a class="reference internal" href="api/tcutility.job.html#tcutility.job.crest.CRESTJob" title="tcutility.job.crest.CRESTJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">CRESTJob</span></code></a> calculation to finish before starting the <a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFJob" title="tcutility.job.adf.ADFJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFJob</span></code></a> calculations.</p>
</section>
<section id="supported-engines">
<h3>Supported engines<a class="headerlink" href="#supported-engines" title="Link to this heading">#</a></h3>
<p>We currently support the following engines and job classes:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.scm.com/product/adf/">Amsterdam Density Functional (ADF)</a></p>
<ul>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFJob" title="tcutility.job.adf.ADFJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFJob</span></code></a>, regular ADF calculations</p></li>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFFragmentJob" title="tcutility.job.adf.ADFFragmentJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFFragmentJob</span></code></a>, fragment based calculations</p></li>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.nmr.NMRJob" title="tcutility.job.nmr.NMRJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">NMRJob</span></code></a>, Nuclear Magnetic Resonance (NMR) calculations using ADF</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://www.scm.com/product/dftb/">Density Functional with Tight Binding (DFTB)</a></p>
<ul>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.dftb.DFTBJob" title="tcutility.job.dftb.DFTBJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">DFTBJob</span></code></a>, regular DFTB calculations</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://www.faccts.de/orca/">ORCA</a></p>
<ul>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.orca.ORCAJob" title="tcutility.job.orca.ORCAJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ORCAJob</span></code></a>, regular ORCA calculations</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://github.com/crest-lab/crest">Conformer rotamer ensemble sampling tool (CREST)</a> including <a class="reference external" href="https://crest-lab.github.io/crest-docs/page/overview/workflows.html#quantum-cluster-growth-qcg">Quantum Cluster Growth (QCG)</a></p>
<ul>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.crest.CRESTJob" title="tcutility.job.crest.CRESTJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">CRESTJob</span></code></a>, CREST conformational search</p></li>
<li><p><a class="reference internal" href="api/tcutility.job.html#tcutility.job.crest.QCGJob" title="tcutility.job.crest.QCGJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">QCGJob</span></code></a>, QCG explicit solvation search</p></li>
</ul>
</li>
</ul>
<p>See the <a class="reference external" href="./api/tcutility.job.html">API Documentation</a> for an overview of the Job classes offered by tcutility.job module.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want support for new engines/classes, please open an issue on our GitHub page, or let one of the developers know!</p>
</div>
</section>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Link to this heading">#</a></h2>
<p>To run calculations related to the Amsterdam Modelling Suite (AMS) you will require a license.</p>
<p>For ORCA calculations you will need to add the ORCA executable to your PATH.</p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h2>
<p>A few typical use-cases are given below. Click <a class="reference external" href="./examples.html">here</a> for a full overview of all examples.</p>
<p>It is quite easy to set up calculations using the <a class="reference internal" href="api/tcutility.job.html#module-tcutility.job" title="tcutility.job"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tcutility.job</span></code></a> package.
For example, if we want to run a simple geometry optimization using ADF we can use the <a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFJob" title="tcutility.job.adf.ADFJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFJob</span></code></a> class.</p>
<p>In this case we are optimizing the water dimer at the BP86-D3(BJ)/TZ2P level.
To handle the ADF settings you can refer to the GUI. For example, to use a specific functional simply enter the name of the functional as it appears in the ADF GUI. The same applies to pretty much all settings. The <a class="reference internal" href="api/tcutility.job.html#tcutility.job.adf.ADFJob" title="tcutility.job.adf.ADFJob"><code class="xref py py-class docutils literal notranslate"><span class="pre">ADFJob</span></code></a> class will handle everything in the background for you.</p>
<p>The job will be run in the <code class="docutils literal notranslate"><span class="pre">./calculations/GO_water_dimer</span></code> directory. The <a class="reference internal" href="api/tcutility.job.html#module-tcutility.job" title="tcutility.job"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tcutility.job</span></code></a> package will handle running of the calculation as well. It will detect if your platform supports slurm. If it does, it will use <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> to run your calculations. Otherwise, it will simply run the calculation locally.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" name="UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" role="tab" tabindex="0">Runscript (<a class="reference download internal" download="" href="_downloads/d1984d07233b61c9fa5986aed5cd64fb/GO_water_dimer.py"><code class="xref download docutils literal notranslate"><span class="pre">󠀠download</span></code></a>)</button><button aria-controls="panel-0-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" name="WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" role="tab" tabindex="-1">XYZ-file (<a class="reference download internal" download="" href="_downloads/1a62c028c9da69253548783ae8a76070/water_dimer.xyz"><code class="xref download docutils literal notranslate"><span class="pre">󠀠download</span></code></a>)</button></div><div aria-labelledby="tab-0-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" class="sphinx-tabs-panel group-tab" id="panel-0-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" name="UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL0dPX3dhdGVyX2RpbWVyLnB5PmAp" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFJob</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span><span class="c1"># define a new job using the Job context-manager</span>
<span class="linenos"> 4</span><span class="k">with</span> <span class="n">ADFJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">job</span><span class="p">:</span>
<span class="linenos"> 5</span>	<span class="c1"># add the molecule</span>
<span class="linenos"> 6</span>	<span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="s1">&#39;water_dimer.xyz&#39;</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>	<span class="c1"># set the rundir and name of the job, they will </span>
<span class="linenos"> 9</span>	<span class="c1"># determine where the job will run</span>
<span class="linenos">10</span>	<span class="n">job</span><span class="o">.</span><span class="n">rundir</span> <span class="o">=</span> <span class="s1">&#39;calculations&#39;</span>
<span class="linenos">11</span>	<span class="n">job</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;GO_water_dimer&#39;</span>
<span class="linenos">12</span>	
<span class="linenos">13</span>	<span class="c1"># set the ADF settings</span>
<span class="linenos">14</span>	<span class="n">job</span><span class="o">.</span><span class="n">functional</span><span class="p">(</span><span class="s1">&#39;BP86-D3(BJ)&#39;</span><span class="p">)</span>
<span class="linenos">15</span>	<span class="n">job</span><span class="o">.</span><span class="n">basis_set</span><span class="p">(</span><span class="s1">&#39;TZ2P&#39;</span><span class="p">)</span>
<span class="linenos">16</span>	<span class="n">job</span><span class="o">.</span><span class="n">quality</span><span class="p">(</span><span class="s1">&#39;Good&#39;</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span>	<span class="c1"># set the job task</span>
<span class="linenos">19</span>	<span class="n">job</span><span class="o">.</span><span class="n">optimization</span><span class="p">()</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-0-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" name="WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2Ivd2F0ZXJfZGltZXIueHl6PmAp" role="tabpanel" tabindex="0"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">6</span>

<span class="n">O</span>      <span class="o">-</span><span class="mf">1.61075942</span>       <span class="mf">0.14972207</span>       <span class="mf">0.00000000</span>
<span class="n">O</span>       <span class="mf">1.27324620</span>      <span class="o">-</span><span class="mf">0.14984188</span>       <span class="mf">0.00000000</span>
<span class="n">H</span>      <span class="o">-</span><span class="mf">2.05173067</span>      <span class="o">-</span><span class="mf">0.71502154</span>       <span class="mf">0.00000000</span>
<span class="n">H</span>      <span class="o">-</span><span class="mf">0.65160034</span>      <span class="o">-</span><span class="mf">0.06225163</span>       <span class="mf">0.00000000</span>
<span class="n">H</span>       <span class="mf">1.52042212</span>       <span class="mf">0.38869649</span>      <span class="o">-</span><span class="mf">0.77034720</span>
<span class="n">H</span>       <span class="mf">1.52042212</span>       <span class="mf">0.38869649</span>       <span class="mf">0.77034720</span>
</pre></div>
</div>
</div></div>
<p>Another common usage of ADF is running a fragment calculation. This calculation requires setting up three different ADF jobs. Using the <a class="reference internal" href="api/tcutility.job.html#module-tcutility.job" title="tcutility.job"><code class="xref py py-mod docutils literal notranslate"><span class="pre">tcutility.job</span></code></a> package allows you to set up these kinds of jobs in as little as 8 lines of code.</p>
<p>In this case we make use of a special xyz file format (see <a class="reference internal" href="api/tcutility.html#tcutility.molecule.guess_fragments" title="tcutility.molecule.guess_fragments"><code class="xref py py-func docutils literal notranslate"><span class="pre">tcutility.molecule.guess_fragments()</span></code></a>) which specifies the fragments. This saves us some work in setting up the calculations.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" name="UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" role="tab" tabindex="0">Runscript (<a class="reference download internal" download="" href="_downloads/2a505c3581f7da7bf9082296ef7cb96f/frag_NH3BH3.py"><code class="xref download docutils literal notranslate"><span class="pre">󠀠download</span></code></a>)</button><button aria-controls="panel-1-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" name="WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" role="tab" tabindex="-1">XYZ-file (<a class="reference download internal" download="" href="_downloads/4d6b7e579d62ed9e5d25258a67fecb73/NH3BH3.xyz"><code class="xref download docutils literal notranslate"><span class="pre">󠀠download</span></code></a>)</button></div><div aria-labelledby="tab-1-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" class="sphinx-tabs-panel group-tab" id="panel-1-UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" name="UnVuc2NyaXB0ICg6ZG93bmxvYWQ6YPOggKBkb3dubG9hZCA8Li4vZXhhbXBsZXMvam9iL2ZyYWdfTkgzQkgzLnB5PmAp" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">tcutility.job</span> <span class="kn">import</span> <span class="n">ADFFragmentJob</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">tcutility</span> <span class="kn">import</span> <span class="n">molecule</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># load a molecule</span>
<span class="linenos"> 5</span><span class="n">mol</span> <span class="o">=</span> <span class="n">molecule</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;NH3BH3.xyz&#39;</span><span class="p">)</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="c1"># define a new job using the Job context-manager</span>
<span class="linenos"> 8</span><span class="k">with</span> <span class="n">ADFFragmentJob</span><span class="p">()</span> <span class="k">as</span> <span class="n">job</span><span class="p">:</span>
<span class="linenos"> 9</span>	<span class="c1"># add the molecule</span>
<span class="linenos">10</span>	<span class="n">job</span><span class="o">.</span><span class="n">molecule</span><span class="p">(</span><span class="n">mol</span><span class="p">)</span>
<span class="linenos">11</span>	<span class="c1"># add the fragments. The fragment atoms are defined in the input xyz file</span>
<span class="linenos">12</span>	<span class="k">for</span> <span class="n">fragment_name</span><span class="p">,</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">molecule</span><span class="o">.</span><span class="n">guess_fragments</span><span class="p">(</span><span class="n">mol</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="linenos">13</span>		<span class="n">job</span><span class="o">.</span><span class="n">add_fragment</span><span class="p">(</span><span class="n">fragment</span><span class="p">,</span> <span class="n">fragment_name</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" name="WFlaLWZpbGUgKDpkb3dubG9hZDpg86CAoGRvd25sb2FkIDwuLi9leGFtcGxlcy9qb2IvTkgzQkgzLnh5ej5gKQ==" role="tabpanel" tabindex="0"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">8</span>

<span class="n">N</span>       <span class="mf">0.00000000</span>       <span class="mf">0.00000000</span>      <span class="o">-</span><span class="mf">0.81474153</span> <span class="n">frag</span><span class="o">=</span><span class="n">Donor</span>
<span class="n">B</span>      <span class="o">-</span><span class="mf">0.00000000</span>      <span class="o">-</span><span class="mf">0.00000000</span>       <span class="mf">0.83567034</span> <span class="n">frag</span><span class="o">=</span><span class="n">Acceptor</span>
<span class="n">H</span>       <span class="mf">0.47608351</span>      <span class="o">-</span><span class="mf">0.82460084</span>      <span class="o">-</span><span class="mf">1.14410295</span> <span class="n">frag</span><span class="o">=</span><span class="n">Donor</span>
<span class="n">H</span>       <span class="mf">0.47608351</span>       <span class="mf">0.82460084</span>      <span class="o">-</span><span class="mf">1.14410295</span> <span class="n">frag</span><span class="o">=</span><span class="n">Donor</span>
<span class="n">H</span>      <span class="o">-</span><span class="mf">0.95216703</span>       <span class="mf">0.00000000</span>      <span class="o">-</span><span class="mf">1.14410295</span> <span class="n">frag</span><span class="o">=</span><span class="n">Donor</span>
<span class="n">H</span>      <span class="o">-</span><span class="mf">0.58149793</span>       <span class="mf">1.00718395</span>       <span class="mf">1.13712667</span> <span class="n">frag</span><span class="o">=</span><span class="n">Acceptor</span>
<span class="n">H</span>      <span class="o">-</span><span class="mf">0.58149793</span>      <span class="o">-</span><span class="mf">1.00718395</span>       <span class="mf">1.13712667</span> <span class="n">frag</span><span class="o">=</span><span class="n">Acceptor</span>
<span class="n">H</span>       <span class="mf">1.16299585</span>      <span class="o">-</span><span class="mf">0.00000000</span>       <span class="mf">1.13712667</span> <span class="n">frag</span><span class="o">=</span><span class="n">Acceptor</span>
</pre></div>
</div>
</div></div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#job-classes">Job classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm-support">Slurm support</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#job-dependencies">Job dependencies</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#supported-engines">Supported engines</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#requirements">Requirements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="_sources/tcutility.job.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024, TheoCheM VU Amsterdam.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.2.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>